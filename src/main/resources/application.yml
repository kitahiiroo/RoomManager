# ==============================
# 基础配置
# ==============================
server:
  # 应用端口，服务器上访问 http://ip:8080
  port: 8081
spring:
  redis:
    host: localhost
    port: 6379
    # password: yourpassword  # 如果配置了密码，再打开这一行
  sql:
    init:
      mode: always
      schema-locations: classpath:schema.sql
  application:
    name: roommanager

  # ============================
  # 数据源（MySQL）
  # ============================
  datasource:
    # 本地开发可以用 localhost；部署到服务器时，如果 MySQL 和项目在同一台机子，也写 localhost
    url: jdbc:mysql://localhost:3306/roommanager?useSSL=false&serverTimezone=UTC&characterEncoding=utf-8
    username: root         # TODO: 改成你的 MySQL 用户名
    password: qq3031849418       # TODO: 改成你的 MySQL 密码
    driver-class-name: com.mysql.cj.jdbc.Driver

  # ============================
  # JPA / Hibernate
  # ============================
  jpa:
    # 控制 Hibernate 如何处理表结构：
    # create      每次启动都删库建表（慎用）
    # update      没有的表/字段会自动创建，不会删（开发环境常用）
    # validate    只校验表结构，不修改（生产更安全）
    # none        什么都不做
    hibernate:
      ddl-auto: update
    # 打印执行的 SQL，调试时比较方便
    show-sql: true
    properties:
      hibernate:
        format_sql: true
    # 指定 JPA 使用的数据库类型
    database-platform: org.hibernate.dialect.MySQLDialect

  # ============================
  # Redis 配置
  # ============================
  data:
    redis:
      host: localhost      # TODO: 如果 Redis 不在本机，改成对应 IP
      port: 6379
      # password: your_redis_password  # 如果 Redis 设置了密码，在这里配置
      timeout: 2000        # 连接超时时间（毫秒）

  # ============================
  # JSON 序列化（可选）
  # ============================
  jackson:
    date-format: yyyy-MM-dd HH:mm:ss
    time-zone: Asia/Shanghai

# ==============================
# 日志配置（简单版本）
# ==============================
logging:
  level:
    root: info
    org.springframework.web: info
    org.hibernate.SQL: debug          # 打印 SQL
    org.hibernate.type.descriptor.sql.BasicBinder: trace  # 打印 SQL 参数
  file:
    name: logs/roommanager.log        # 日志文件路径（相对项目运行目录）

# ==============================
# 预留：多环境配置示例（可选）
# ==============================
# 如果你想区分 dev / prod 环境：
# 1) 把上面的配置放在 application-dev.yml 和 application-prod.yml
# 2) 在这里使用 profiles.active 指定环境
#
# spring:
#   profiles:
#     active: dev
#
# 然后在服务器上修改为 prod 即可。